import javax.swing.JFrame;
import javax.swing.JPanel;

import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.plot.PlotOrientation;
import org.jfree.data.xy.XYSeries;
import org.jfree.data.xy.XYSeriesCollection;


public class GraphBuilder {
	
	
	private XYSeries buildSeriesAgainstTime(String name, Sampling s, double values[], double scalingFactor){
		XYSeries plot = new XYSeries(name);
		for(double i = 0; i < s.getSampling().length; i++){
			
			plot.add(i / (s.getSamplingRate() / 1000), values[(int) i] * scalingFactor);
		}
		return plot;
	}
	
	public JPanel buildGraph(Sampling s,double values, String name,double[] values, double scalingFactor){
	    
		this.scalingFactor = scalingFactor;
	   	ShortTermAnalysis sta = new ShortTermAnalysis();
		
		XYSeries original = buildSeriesAgainstTime(name,s,values,1);
;
		

        XYSeriesCollection dataset = new XYSeriesCollection();
        dataset.addSeries(original);
        dataset.addSeries(energy);
        dataset.addSeries(magnitude);
        dataset.addSeries(zeroCrossing);
        

        JFreeChart chart = ChartFactory.createXYLineChart(
                "Signal Plot",
                "Time (ms)",
                "s[t],E[t],M[t],Z[t]",
                dataset, 
                PlotOrientation.VERTICAL,
                true,
                true,
                false
                );

        JPanel panel = new JPanel();
        ChartPanel chartPanel = new ChartPanel(chart);
        panel.add(chartPanel);
        this.add(panel);
        this.setVisible(true);
	}
	
	
}
