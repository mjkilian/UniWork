import java.io.File;
import java.io.FileNotFoundException;
import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;


// TODO: Auto-generated Javadoc
/**
 * The Class Sampling. Represents a sampling of sound over a given time period
 */
public class Sampling {
	
	/** The sampling, where each entry is in decibels */
	private double[] sampling;
	
	/** The sampling rate. */
	private double samplingRate;
	
	private double length;
	
	/**
	 * Instantiates a new sampling.
	 *
	 * @param file the input file for the sampling
	 * @param len the length of the sampling in milliseconds
	 */
	public Sampling(File file, double len){
		this.length = len;
		
		//instantiate file reader
		Scanner reader = null;
		try {
			reader = new Scanner(file);
		} catch (FileNotFoundException e) {
			e.printStackTrace();
		}
		
		//take in samples
		List<Double> sampleQueue = new ArrayList<Double>(3000);
		while(reader.hasNextLine()){
			sampleQueue.add(Double.parseDouble(reader.nextLine()));
		}
		
		
		
		this.sampling = new double[sampleQueue.size()];
		for(int i = 0; i < sampleQueue.size(); i++){
			sampling[i] = sampleQueue.get(i);
		}
		sampleQueue = null;
		
		/*calculate sampling frequency (the 1000 is to convert correctly from milliseconds)*/
		this.samplingRate = (sampling.length / len) * 1000;
	}
	
	

	/**
	 * Gets the sampling data.
	 *
	 * @return the sampling
	 */
	public double[] getSampling() {
		return sampling;
	}

	/**
	 * Gets the sampling rate in Hz.
	 *
	 * @return the sampling rate
	 */
	public double getSamplingRate() {
		return samplingRate;
	}

	public String toString(){
		String output = "";
		for(int i = 0; i < sampling.length; i++){
			output += sampling[i] + "\n";
		}
		return output;
	}
	
	public static void main(String args[]){
		Sampling s = new Sampling(new File("data/laboratory.dat"),300);
	}
	
	
}
